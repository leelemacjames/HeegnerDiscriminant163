<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heegner Number & Prime Polynomial Explorer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- MathJax for LaTeX Rendering -->
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        .prime-cell { background-color: #dcfce7; color: #166534; font-weight: bold; }
        .composite-cell { background-color: #fee2e2; color: #991b1b; }
        /* Smooth scrolling for the table container */
        .table-scroll {
            scrollbar-width: thin;
            scrollbar-color: #cbd5e1 #f8fafc;
        }
    </style>
</head>
<body class="bg-slate-50 min-height-screen p-4 md:p-8">
    <div class="max-w-7xl mx-auto">
        <header class="mb-8 text-center">
            <h1 class="text-3xl font-bold text-slate-800 mb-2">Heegner Number Matrix Explorer</h1>
            <p class="text-slate-600">Investigating the Prime-Generating Polynomial: \(f(n) = n^2 - n + C\), where \(C = \frac{1+D}{4}\)</p>
        </header>

        <!-- Controls -->
        <div class="bg-white p-6 rounded-xl shadow-sm mb-8 flex flex-wrap gap-6 items-center justify-center border border-slate-200">
            <div class="flex flex-col">
                <label class="text-sm font-semibold text-slate-700 mb-1">Max \(n\) (Columns):</label>
                <input type="range" id="nRange" min="5" max="50" value="45" class="w-64 accent-blue-600">
                <span id="nValue" class="text-center font-mono text-blue-600 font-bold text-lg">45</span>
            </div>
            <div class="text-sm text-slate-500 max-w-md border-l pl-6 border-slate-200">
                <p>Formula: \(n^2 - n + \text{Constant}\)</p>
                <p class="mt-1">Example (\(D=163\), \(n=1\)): \(1^2 - 1 + 41 = 41\)</p>
                <div class="mt-2 flex gap-4">
                    <span><span class="inline-block w-3 h-3 bg-green-100 border border-green-300 mr-1"></span> Prime</span>
                    <span><span class="inline-block w-3 h-3 bg-red-100 border border-red-300 mr-1"></span> Composite</span>
                </div>
            </div>
        </div>

        <!-- Table Container -->
        <div class="overflow-x-auto bg-white rounded-xl shadow-md border border-slate-200 table-scroll">
            <table class="w-full text-sm text-left border-collapse">
                <thead>
                    <tr id="tableHeader" class="bg-slate-100 border-b border-slate-200">
                        <!-- Populated by JS -->
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <!-- Populated by JS -->
                </tbody>
            </table>
        </div>

        <!-- Explanation Section -->
        <div class="grid md:grid-cols-3 gap-6 mt-12">
            <!-- Col 1: Basics -->
            <div class="bg-white p-5 rounded-xl shadow-sm border border-slate-200">
                <h2 class="text-lg font-bold text-slate-800 mb-3 border-b pb-2">Calculation Logic</h2>
                <div class="text-slate-600 space-y-3 text-sm">
                    <p>Each cell is: <code class="bg-slate-100 p-1 rounded text-blue-700">nÂ² - n + C</code></p>
                    <p>
                        <strong>Row 163 (C=41):</strong>
                        <ul class="list-disc ml-5 space-y-1">
                            <li>\(n=1\): \(1-1+41 = 41\)</li>
                            <li>\(n=40\): \(1600-40+41 = 1601\)</li>
                            <li>\(n=41\): \(1681-41+41 = 41^2\)</li>
                        </ul>
                    </p>
                    <p class="pt-2 italic border-t">
                        <strong>Note on D=1, 2:</strong> These yield \(C=0.5\) and \(0.75\). Since \(C\) is not an integer, the polynomial never produces primes.
                    </p>
                </div>
            </div>

            <!-- Col 2: Unique Factorization -->
            <div class="bg-white p-5 rounded-xl shadow-sm border border-slate-200">
                <h2 class="text-lg font-bold text-slate-800 mb-3 border-b pb-2">Class Number 1</h2>
                <div class="text-slate-600 space-y-3 text-sm">
                    <p>
                        In the associated rings of integers for these 9 numbers, <strong>Unique Factorization</strong> holds. This is a property of "Class Number 1" fields.
                    </p>
                    <p>
                        This algebraic "perfection" ensures that the polynomial doesn't "break" (produce a composite number) until the most basic algebraic identity (\(n=C\)) forces it to.
                    </p>
                </div>
            </div>

            <!-- Col 3: Counter-Example -->
            <div class="bg-white p-5 rounded-xl shadow-sm border border-slate-200 border-l-4 border-l-red-400">
                <h2 class="text-lg font-bold text-slate-800 mb-3 border-b pb-2">Non-Unique Counter-Example</h2>
                <div class="text-slate-600 space-y-3 text-sm">
                    <p>For \(D=5\) (not a Heegner number), the ring \(\mathbb{Z}[\sqrt{-5}]\) lacks unique factorization. Witness the number <strong>6</strong>:</p>
                    <div class="bg-slate-50 p-2 rounded font-mono text-center">
                        \(6 = 2 \times 3\) <br>
                        \(6 = (1 + \sqrt{-5})(1 - \sqrt{-5})\)
                    </div>
                    <p>
                        Since \(2, 3, (1 \pm \sqrt{-5})\) are all irreducible but distinct, 6 has two different "prime" factorizations. This failure of symmetry is why non-Heegner polynomials fail to generate long prime streaks.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const heegnerNumbers = [1, 2, 3, 7, 11, 19, 43, 67, 163];
        
        function isPrime(num) {
            if (num <= 1) return false;
            if (num % 1 !== 0) return false;
            for (let i = 2; i <= Math.sqrt(num); i++) {
                if (num % i === 0) return false;
            }
            return true;
        }

        function updateTable() {
            const maxN = parseInt(document.getElementById('nRange').value);
            document.getElementById('nValue').textContent = maxN;

            const headerRow = document.getElementById('tableHeader');
            const tableBody = document.getElementById('tableBody');

            const fractionHeader = "Const (1+D)/4";

            headerRow.innerHTML = `
                <th class="p-4 border-r border-slate-200 sticky left-0 bg-slate-100 z-30 min-w-[100px]">Heegner \(D\)</th>
                <th class="p-4 border-r border-slate-200 sticky left-[100px] bg-slate-100 z-30 min-w-[140px]">${fractionHeader}</th>
                ${Array.from({length: maxN}, (_, i) => `<th class="p-2 text-center border-r border-slate-200 min-w-[60px]">\(n=${i+1}\)</th>`).join('')}
            `;

            tableBody.innerHTML = '';
            heegnerNumbers.forEach(d => {
                const constant = (1 + d) / 4;
                const row = document.createElement('tr');
                row.className = "border-b border-slate-100 hover:bg-slate-50 transition-colors group";
                
                let cellsHtml = `
                    <td class="p-4 font-bold text-slate-700 border-r border-slate-200 sticky left-0 bg-white group-hover:bg-slate-50 z-20">${d}</td>
                    <td class="p-4 font-mono text-slate-500 border-r border-slate-200 sticky left-[100px] bg-white group-hover:bg-slate-50 z-20">${constant}</td>
                `;

                for (let n = 1; n <= maxN; n++) {
                    const val = (n * n) - n + constant;
                    const isP = isPrime(val);
                    const isInt = (val % 1 === 0);
                    
                    let cellClass = "";
                    if (isInt) {
                        cellClass = isP ? 'prime-cell' : 'composite-cell';
                    } else {
                        cellClass = 'text-slate-400 italic bg-slate-50';
                    }
                    
                    cellsHtml += `<td class="p-2 text-center border-r border-slate-100 ${cellClass}">${val}</td>`;
                }

                row.innerHTML = cellsHtml;
                tableBody.appendChild(row);
            });

            if (window.MathJax) {
                MathJax.typesetPromise();
            }
        }

        document.getElementById('nRange').addEventListener('input', updateTable);
        window.onload = updateTable;
    </script>
</body>
</html>

